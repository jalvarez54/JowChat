@using JA.UTILS.Helpers

@{
    ViewBag.Title = "ChatAdmin";
}

<h2>Chat Admin</h2>

@section scripts {
    <!--Script references. -->
    @Scripts.Render("~/bundles/chat")
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="@Url.Content("~/signalr/hubs")"></script>

}



<h4>UserName = <span id="spanUserName"></span></h4>
<h4>IdConnection = <span id="spanIdConnection"></span></h4>
<h4>Transport = <span id="spanTransport"></span></h4>
<h4>Protocol = <span id="spanProtocol"></span></h4>

<!-- middle row -->
<div class="row">
    <!-- left col -->
    <div class="col-lg-3 col-sm-12">
        <!-- users div -->
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title"><span class="glyphicon glyphicon-user"></span>&nbsp;Users on line <span class="badge" id='spanUsersCount'></span></h3>
            </div>
            <div id="panelUsers" class="panel-body panelScrollDown">
                <div id="divusers"></div>
            </div>
        </div>

    </div><!-- left col -->
    <!-- center col -->
    <div class="col-lg-9 col-sm-12">
        <table class="table">
            <thead>
                <tr>
                    <th>
                        ConnectionId
                    </th>
                    <th>
                        UserName
                    </th>
                    <th>
                        ConnectionDateTime
                    </th>
                    <th>
                        Message
                    </th>
                    <th>
                        MessageDateTime
                    </th>
                    <th></th>
                </tr>
            </thead>
            <tbody id="adminTbodyTable"></tbody>
        </table>
    </div><!-- center col -->
</div><!-- middle row -->
<!-- down row -->
<div class="row">
    <!-- left col -->
    <div class="col-lg-4 col-sm-12">
    </div><!-- left col -->
    <!-- center col -->
    <div class="col-lg-12 col-sm-12">
        <!-- tech infos -->
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">
                    <a data-toggle="collapse" data-parent="#accordion" href="#collapseFive">
                        <span class="glyphicon glyphicon-signal"></span>&nbsp;Technical informations
                    </a>
                </h3>
            </div>
            <div id="collapseFive" class="panel-collapse collapse">
                <div class="panel-body">
                    <div id="divTechInfos" class="alert alert-warning divTechInfosLongText">
                        <p class="lead">
                            <ul>
                                <li><strong>C#</strong> </li>
                                <li>Company name from assembly: @Utils.GetAssemblyCompany()</li>
                                <li>Client company name : @Utils.GetConfigCompanyName()</li>
                                <li>Client company address: @Utils.GetConfigCompanyAddress()</li>
                                <li>@Utils.GetAssemblyCopyright()</li>
                                <li>.NET CLR version: @Utils.GetClrVersion()</li>
                                <li>App: @Utils.GetAssemblyProduct() | Assembly Version: @Utils.GetAssemblyVersion() | Product Version: @Utils.GetAssemblyInformationnalVersion()</li>
                                <li>Web.Config: @Utils.GetAppSetting("WebConfig")</li>
                                <li>isIIS ?: <span id="spanIIS">@Request.ServerVariables["SERVER_SOFTWARE"].Contains("IIS")</span></li>
                                <li><strong>JS</strong></li>
                                <li>company: <span id="spanCompany"></span></li>
                                <li>address: <span id="spanAddress"></span></li>
                                <li>department: <span id="spanDepartment"></span></li>
                                <li>cdf54.ja.signalR.chat.js : <span id="spanChat"></span></li>
                                <li>cdf54.ja.utils.js : <span id="spanUtils"></span></li>
                                <li>Jquery version: <span id="spanJqueryVersion"></span></li>
                                <li>Bootstrap version: <span id="spanBootStrapVersion"></span></li>
                                <li>Signalr version: <span id="spanSignalRVersion"></span></li>
                                <li>IsTraceEnable: <span id="spanIsTraceEnable"></span></li>
                                <li>IsDemo: <span id="spanIsDemo"></span></li>
                                <li>IsConsoleLoggingEnable: <span id="spanIsConsoleLoggingEnable"></span></li>
                                <li>AppPath: <span id="spanAppPath"></span></li>
                                <li>@MyRazorHelpers.AdminInformations()</li>
                                <li>IIS Virtual path: <span id="spanIISVirtualPath"></span></li>
                            </ul>
                        </p>

                    </div>
                </div>
            </div>
        </div><!-- tech infos -->
        <!-- trace div -->
        @if (Boolean.Parse(System.Configuration.ConfigurationManager.AppSettings["IsTraceEnable"]))
        {
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                            <span class="glyphicon glyphicon-camera"></span>&nbsp;Client Trace and RPC called by Server
                        </a>
                    </h3>
                </div>
                <div id="collapseOne" class="panel-collapse collapse">
                    <div class="panel-body">
                        <div id="divClientTrace" class="alert alert-danger divContextLongText">
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
                            <span class="glyphicon glyphicon-camera"></span>&nbsp;Server Trace and RPC called by Client
                        </a>
                    </h3>
                </div>
                <div id="collapseTwo" class="panel-collapse collapse">
                    <div class="panel-body">
                        <div id="divServerTrace" class="alert alert-danger divContextLongText">
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree">
                            <span class="glyphicon glyphicon-signal"></span>&nbsp;Server Context
                        </a>
                    </h3>
                </div>
                <div id="collapseThree" class="panel-collapse collapse">
                    <div class="panel-body">
                        <div id="divContext" class="alert alert-warning divContextLongText">
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseFour">
                            <span class="glyphicon glyphicon-signal"></span>&nbsp;Client hub
                        </a>
                    </h3>
                </div>
                <div id="collapseFour" class="panel-collapse collapse">
                    <div class="panel-body">
                        <div id="divHub" class="alert alert-warning divHubLongText">
                        </div>
                    </div>
                </div>
            </div><!-- trace div -->
        }
    </div><!-- center col -->
    <!-- right col -->
    <div class="col-lg-3 col-sm-12">
    </div><!-- right col -->
</div><!-- down row -->
